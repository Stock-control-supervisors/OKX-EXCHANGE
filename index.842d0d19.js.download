"use strict";(self.webpackChunkdefi_mode=self.webpackChunkdefi_mode||[]).push([[1401],{21401:(e,n,r)=>{r.d(n,{TRADE_TYPE:()=>h.xy,default:()=>Z,tradeUtil:()=>x.Z});var t=r(1413),a=r(74165),s=r(45987),c=r(15861),o=r(1708),u=r(67303),i=r(45271),f=r(48635),h=r(48779),d=r(36916),l=r(74579),x=r(48903),E=["txnHash","checkType","message","extPayload","extSubscribeParams"],p=["txnHash","checkType"],v=["txnHash","checkType","message"],T=["txnHash","extPayload","extJson","extSubscribeParams"],N=["txnHash","extPayload","extSubscribeParams"],m=["txnHash","checkType","message"];const Z={[h.xy.SELL]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,c,l,x,p,v,T,N,m,Z,I,C,y,P;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.marketInfo,c=n.tradeData,l=n.notShowToast,x=void 0!==l&&l,e.next=3,o.Z.getWalletAccount();case 3:return p=e.sent,e.prev=4,e.next=7,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 7:return e.next=9,d.Z.getTradeEvent({nftInfo:r,orderInfo:{source:null===t||void 0===t?void 0:t.source},eventName:h.xy.SELL});case 9:return v=e.sent,e.next=12,v(n);case 12:return T=e.sent,N=T.txnHash,m=T.checkType,Z=T.message,I=T.extPayload,C=T.extSubscribeParams,y=(0,s.Z)(T,E),(0,i.KT)({nftInfo:r,scene:f.SCENE_ENUM.MadeListing,txnHash:N,tradeData:c,from:p,to:p}),e.next=22,d.Z.checkTransaction({orderInfo:{source:null===t||void 0===t?void 0:t.source,sourceName:null===t||void 0===t?void 0:t.name},nftInfo:r,txnHash:N,checkType:m,scene:f.SCENE_ENUM.MadeListing,from:p,to:p,notShowToast:x,message:Z,extResult:y,extPayload:I,extSubscribeParams:C});case 22:return P=e.sent,(0,u.kZf)({order_hash:N}),e.abrupt("return",Promise.resolve(P));case 27:return e.prev=27,e.t0=e.catch(4),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.MadeListing,error:e.t0,nftInfo:r,from:p,to:p,notShowToast:x,payload:{chain:null===r||void 0===r?void 0:r.chain,sourceName:null===t||void 0===t?void 0:t.name,tokenStandard:r.tokenStandard}}),e.abrupt("return",Promise.reject(e.t0));case 31:case"end":return e.stop()}}),e,null,[[4,27]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.UPDATE_PRICE]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,c,u,l,x,E,v,T,N,m,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.orderInfo,c=n.tradeData,u=n.notShowToast,l=void 0!==u&&u,e.next=3,o.Z.getWalletAccount();case 3:return x=e.sent,e.prev=4,e.next=7,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 7:return e.next=9,d.Z.getTradeEvent({nftInfo:r,orderInfo:t,eventName:h.xy.UPDATE_PRICE});case 9:return E=e.sent,e.next=12,E(n);case 12:return v=e.sent,T=v.txnHash,N=v.checkType,m=(0,s.Z)(v,p),(0,i.KT)({nftInfo:r,orderInfo:t,scene:f.SCENE_ENUM.UpdateListing,txnHash:T,tradeData:c,from:x,to:x}),e.next=19,d.Z.checkTransaction({orderInfo:t,nftInfo:r,txnHash:T,checkType:N,scene:f.SCENE_ENUM.UpdateListing,from:x,to:x,notShowToast:l,extResult:m});case 19:return Z=e.sent,e.abrupt("return",Promise.resolve(Z));case 23:return e.prev=23,e.t0=e.catch(4),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.UpdateListing,error:e.t0,nftInfo:r,from:x,to:x,notShowToast:l,payload:{chain:null===r||void 0===r?void 0:r.chain,sourceName:t.sourceName,tokenStandard:r.tokenStandard}}),e.abrupt("return",Promise.reject(e.t0));case 27:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.MAKE_OFFER]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,c,l,x,E,p,T,N,m,Z,I,C,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.collectionInfo,c=n.tradeData,l=n.notShowToast,x=void 0!==l&&l,e.next=3,o.Z.getWalletAccount();case 3:return E=e.sent,p=r?null===r||void 0===r?void 0:r.chain:null===t||void 0===t?void 0:t.chain,e.prev=5,e.next=8,d.Z.beforeTrade({chain:p});case 8:return e.next=10,d.Z.getTradeEvent({nftInfo:r||t,eventName:h.xy.MAKE_OFFER});case 10:return T=e.sent,e.next=13,T(n);case 13:return N=e.sent,m=N.txnHash,Z=N.checkType,I=N.message,C=(0,s.Z)(N,v),(0,i.KT)({nftInfo:r||t,scene:f.SCENE_ENUM.MadeOffer,txnHash:m,tradeData:c,from:E,to:E}),e.next=21,d.Z.checkTransaction({nftInfo:r||t,txnHash:m,checkType:Z,scene:f.SCENE_ENUM.MadeOffer,from:E,to:E,notShowToast:x,message:I,extResult:C});case 21:return y=e.sent,(0,u.TMQ)({order_hash:m}),e.abrupt("return",Promise.resolve(y));case 26:return e.prev=26,e.t0=e.catch(5),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.MadeOffer,error:e.t0,nftInfo:r||t,from:E,to:E,notShowToast:x,payload:{chain:p}}),e.abrupt("return",Promise.reject(e.t0));case 30:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.BUY]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,l,x,E,p,v,T,N,m,Z,I,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.orderInfo,t=n.nftInfo,s="",e.prev=2,e.next=5,d.Z.beforeTrade({chain:null===t||void 0===t?void 0:t.chain});case 5:return e.next=7,d.Z.getTradeEvent({orderInfo:r,nftInfo:t,eventName:h.xy.BUY});case 7:return c=e.sent,l=+new Date,e.next=11,c(n);case 11:return x=e.sent,E=x.txnHash,p=x.checkType,v=x.gas,T=x.extJson,N=void 0===T?{}:T,s=E,m=+new Date,d.Z.reportOtherTx({txnHash:E,orderInfo:r}),(0,i.KT)({orderInfo:r,nftInfo:t,scene:f.SCENE_ENUM.Purchase,txnHash:s}),e.next=23,o.Z.getWalletAccount();case 23:return Z=e.sent,I=+new Date,(0,i.PN)("sendTransaction",{txnHash:E,createHashTime:l,endHashTime:m,startCheckTransactionTime:I,scene:f.SCENE_ENUM.Purchase,from:null===r||void 0===r?void 0:r.ownerAddress,to:Z}),e.next=28,d.Z.checkTransaction({orderInfo:r,nftInfo:t,txnHash:E,checkType:p,gas:v,scene:f.SCENE_ENUM.Purchase,from:r.ownerAddress,to:Z,extJson:N});case 28:return C=e.sent,(0,u.fQw)({tx_hash:E}),e.abrupt("return",Promise.resolve(C));case 33:return e.prev=33,e.t0=e.catch(2),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.Purchase,error:e.t0,orderInfo:r,nftInfo:t,txnHash:s}),e.abrupt("return",Promise.reject(e.t0));case 37:case"end":return e.stop()}}),e,null,[[2,33]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.BATCH_BUY]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,c,u,l,x,E,p,v,N,m,Z,I,C,y,P,S,_;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.orderList,u=(null===(r=c[0])||void 0===r?void 0:r.nftInfo)||{},l=u.chain,e.prev=2,e.next=5,d.Z.beforeTrade({chain:l});case 5:return e.next=7,d.Z.getTradeEvent({nftInfo:{chain:l},eventName:h.xy.BATCH_BUY});case 7:return x=e.sent,E=+new Date,e.next=11,x(n);case 11:return p=e.sent,v=p.txnHash,N=p.extPayload,m=void 0===N?{}:N,Z=p.extJson,I=p.extSubscribeParams,C=(0,s.Z)(p,T),y=+new Date,e.next=21,o.Z.getWalletAccount();case 21:return P=e.sent,d.Z.reportOtherTx({txnHash:v}),S=+new Date,(0,i.PN)("sendTransaction",{txnHash:v,createHashTime:E,endHashTime:y,startCheckTransactionTime:S,scene:f.SCENE_ENUM.BatchPurchase,buyer:P}),e.next=27,d.Z.checkBatchTransaction({txnHash:v,chain:l,scene:f.SCENE_ENUM.BatchPurchase,from:P,to:P,extResult:C,extJson:Z,extPayload:(0,t.Z)((0,t.Z)({},m),{},{orderId:c.map((e=>{var n;return null===e||void 0===e||null===(n=e.orderInfo)||void 0===n?void 0:n.id})).join(",")}),extSubscribeParams:I});case 27:return _=e.sent,e.abrupt("return",Promise.resolve(_));case 31:return e.prev=31,e.t0=e.catch(2),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.BatchPurchase,error:e.t0,orderList:c}),e.abrupt("return",Promise.reject(e.t0));case 35:case"end":return e.stop()}}),e,null,[[2,31]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.BATCH_ACCEPT_OFFER]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x,E,p,v,T,N;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.orderList,s=(null===(r=t[0])||void 0===r?void 0:r.nftInfo)||{},c=s.chain,e.prev=2,e.next=5,d.Z.beforeTrade({chain:c});case 5:return e.next=7,d.Z.getTradeEvent({nftInfo:{chain:c},eventName:h.xy.BATCH_ACCEPT_OFFER});case 7:return u=e.sent,l=+new Date,e.next=11,u(n);case 11:return x=e.sent,E=x.txnHash,(0,i.KT)({scene:f.SCENE_ENUM.AcceptOffer,txnHash:E}),p=+new Date,d.Z.reportOtherTx({txnHash:E}),e.next=18,o.Z.getWalletAccount();case 18:return v=e.sent,T=+new Date,(0,i.PN)("sendTransaction",{txnHash:E,createHashTime:l,endHashTime:p,startCheckTransactionTime:T,scene:f.SCENE_ENUM.AcceptOffer,buyer:v}),e.next=23,d.Z.checkBatchTransaction({txnHash:E,chain:c,scene:f.SCENE_ENUM.AcceptOffer,from:v,to:v});case 23:return N=e.sent,e.abrupt("return",Promise.resolve(N));case 27:return e.prev=27,e.t0=e.catch(2),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.AcceptOffer,error:e.t0,orderList:t}),e.abrupt("return",Promise.reject(e.t0));case 31:case"end":return e.stop()}}),e,null,[[2,27]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.ACCEPT_OFFER]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,l,x,E,p;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.orderInfo,t=n.nftInfo,e.prev=1,e.next=4,d.Z.beforeTrade({chain:null===t||void 0===t?void 0:t.chain});case 4:return e.next=6,d.Z.getTradeEvent({orderInfo:r,nftInfo:t,eventName:h.xy.ACCEPT_OFFER});case 6:return s=e.sent,e.next=9,s(n);case 9:return c=e.sent,l=c.txnHash,x=c.checkType,d.Z.reportOtherTx({txnHash:l,orderInfo:r}),(0,i.KT)({orderInfo:r,scene:f.SCENE_ENUM.AcceptOffer,txnHash:l}),e.next=16,o.Z.getWalletAccount();case 16:return E=e.sent,e.next=19,d.Z.checkTransaction({orderInfo:r,nftInfo:t,txnHash:l,checkType:x,scene:f.SCENE_ENUM.AcceptOffer,from:E,to:r.ownerAddress});case 19:return p=e.sent,(0,u.suG)({tx_hash:l}),e.abrupt("return",Promise.resolve(p));case 24:return e.prev=24,e.t0=e.catch(1),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.AcceptOffer,error:e.t0,orderInfo:r}),e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.CLAIM_NFT]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,e.next=3,o.Z.getWalletAccount();case 3:return t=e.sent,e.prev=4,e.next=7,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 7:return e.next=9,d.Z.getTradeEvent({nftInfo:r,eventName:h.xy.CLAIM_NFT});case 9:return s=e.sent,e.next=12,s(n);case 12:return c=e.sent,u=c.txnHash,l=c.checkType,(0,i.KT)({nftInfo:r,scene:f.SCENE_ENUM.ClaimNft,txnHash:u,from:t,to:t}),e.next=18,d.Z.checkTransaction({nftInfo:r,txnHash:u,checkType:l,scene:f.SCENE_ENUM.ClaimNft,from:t,to:t});case 18:return x=e.sent,e.abrupt("return",Promise.resolve(x));case 22:return e.prev=22,e.t0=e.catch(4),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.ClaimNft,error:e.t0,nftInfo:r,to:t}),e.abrupt("return",Promise.reject(e.t0));case 26:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.TRANSFER]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x,E,p,v,T;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.tradeData,s=t.target,e.next=4,o.Z.getWalletAccount();case 4:return c=e.sent,e.prev=5,e.next=8,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 8:return e.next=10,d.Z.getTradeEvent({nftInfo:r,eventName:h.xy.TRANSFER});case 10:return u=e.sent,e.next=13,u(n);case 13:return l=e.sent,x=l.txnHash,E=l.checkType,p=l.extJson,v=void 0===p?{}:p,(0,i.KT)({nftInfo:r,scene:f.SCENE_ENUM.Transfer,txnHash:x,tradeData:t,from:c,to:s}),e.next=21,d.Z.checkTransaction({nftInfo:r,txnHash:x,checkType:E,scene:f.SCENE_ENUM.Transfer,from:c,to:s,extJson:v});case 21:return T=e.sent,e.abrupt("return",Promise.resolve(T));case 25:return e.prev=25,e.t0=e.catch(5),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.Transfer,error:e.t0,nftInfo:r,from:c,to:s}),e.abrupt("return",Promise.reject(e.t0));case 29:case"end":return e.stop()}}),e,null,[[5,25]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.BATCH_TRANSFER]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,c,u,l,x,E,p,v,T,m,Z,I,C;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftList,c=n.transferData,u=c.target,l=c.chain,e.next=4,o.Z.getWalletAccount();case 4:return x=e.sent,e.prev=5,e.next=8,d.Z.beforeTrade({chain:l});case 8:return e.next=10,d.Z.getTradeEvent({nftInfo:{chain:l},eventName:h.xy.BATCH_TRANSFER});case 10:return E=e.sent,e.next=13,E(n);case 13:return p=e.sent,v=p.txnHash,T=p.extPayload,m=void 0===T?{}:T,Z=p.extSubscribeParams,I=(0,s.Z)(p,N),(0,i.KT)({nftList:r,scene:f.SCENE_ENUM.BatchTransfer,txnHash:v,tradeData:c,from:x,to:u}),e.next=22,d.Z.checkBatchTransaction({nftList:r,txnHash:v,chain:l,scene:f.SCENE_ENUM.BatchTransfer,from:x,to:u,extResult:I,extPayload:(0,t.Z)((0,t.Z)({},m),{},{batchTransferDetails:r.map((e=>({nftId:e.id,count:e.readyTransferValue||1})))}),extSubscribeParams:Z});case 22:return C=e.sent,e.abrupt("return",Promise.resolve(C));case 26:return e.prev=26,e.t0=e.catch(5),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.BatchTransfer,error:e.t0,nftList:r,from:x,to:u}),e.abrupt("return",Promise.reject(e.t0));case 30:case"end":return e.stop()}}),e,null,[[5,26]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.CANCEL]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x,E;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.orderInfo,e.prev=1,e.next=4,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 4:return e.next=6,d.Z.getTradeEvent({nftInfo:r,orderInfo:t,eventName:h.xy.CANCEL});case 6:return s=e.sent,e.next=9,s(n);case 9:return c=e.sent,u=c.txnHash,l=c.checkType,(0,i.KT)({nftInfo:r,orderInfo:t,scene:f.SCENE_ENUM.CancelSell,txnHash:u}),e.next=15,o.Z.getWalletAccount();case 15:return x=e.sent,e.next=18,d.Z.checkTransaction({nftInfo:r,orderInfo:t,txnHash:u,checkType:l,scene:f.SCENE_ENUM.CancelSell,from:x,to:x});case 18:return E=e.sent,e.abrupt("return",Promise.resolve(E));case 22:return e.prev=22,e.t0=e.catch(1),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.CancelSell,error:e.t0,payload:{chain:null===r||void 0===r?void 0:r.chain,sourceName:t.sourceName,tokenStandard:r.tokenStandard},nftInfo:r,orderInfo:t}),e.abrupt("return",Promise.reject(e.t0));case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.CANCEL_OFFER]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x,E;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.orderInfo,e.next=3,o.Z.getWalletAccount();case 3:return s=e.sent,e.prev=4,e.next=7,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 7:return e.next=9,d.Z.getTradeEvent({nftInfo:r,orderInfo:t,eventName:h.xy.CANCEL_OFFER});case 9:return c=e.sent,e.next=12,c(n);case 12:return u=e.sent,l=u.txnHash,x=u.checkType,(0,i.KT)({nftInfo:r,orderInfo:t,scene:f.SCENE_ENUM.CancellOffer,txnHash:l}),e.next=18,d.Z.checkTransaction({nftInfo:r,orderInfo:t,txnHash:l,checkType:x,scene:f.SCENE_ENUM.CancellOffer,from:s,to:s});case 18:return E=e.sent,e.abrupt("return",Promise.resolve(E));case 22:return e.prev=22,e.t0=e.catch(4),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.CancellOffer,error:e.t0,nftInfo:r,orderInfo:t}),e.abrupt("return",Promise.reject(e.t0));case 26:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.BTC_INSCRIBE]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.to,t=n.type,s=n.inscriptions,c=n.chain,e.next=3,o.Z.getWalletAccount();case 3:return u=e.sent,e.prev=4,e.next=7,d.Z.getTradeEvent({nftInfo:{chain:c},eventName:h.xy.BTC_INSCRIBE});case 7:return l=e.sent,e.next=10,l(n);case 10:return x=e.sent,(0,i.KT)({scene:f.SCENE_ENUM.Inscribing,txnHash:null===x||void 0===x?void 0:x.revealTxs,from:u,to:r,type:t,inscriptions:s}),e.abrupt("return",Promise.resolve(x));case 15:return e.prev=15,e.t0=e.catch(4),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.Inscribing,error:e.t0,from:u,to:r}),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.P2P_SELL]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,c,u,l,x,E,p,v,T,N,Z;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.tradeData,c=n.notShowToast,u=void 0!==c&&c,e.next=3,o.Z.getWalletAccount();case 3:return l=e.sent,e.prev=4,e.next=7,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 7:return e.next=9,d.Z.getTradeEvent({nftInfo:r,eventName:h.xy.P2P_SELL});case 9:return x=e.sent,e.next=12,x(n);case 12:return E=e.sent,p=E.txnHash,v=E.checkType,T=E.message,N=(0,s.Z)(E,m),(0,i.KT)({nftInfo:r,scene:f.SCENE_ENUM.P2PSell,txnHash:p,tradeData:t,from:l,to:l}),e.next=20,d.Z.checkTransaction({nftInfo:r,txnHash:p,checkType:v,scene:f.SCENE_ENUM.P2PSell,from:l,to:l,notShowToast:u,message:T,extResult:N,bizType:h.lW.P2P});case 20:return Z=e.sent,e.abrupt("return",Promise.resolve(Z));case 24:return e.prev=24,e.t0=e.catch(4),d.Z.sendErrorMsg({loggerKey:h.I4,scene:f.SCENE_ENUM.P2PSell,error:e.t0,nftInfo:r,from:l,to:l,notShowToast:u,payload:{chain:null===r||void 0===r?void 0:r.chain}}),e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.P2P_BUY]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x,E,p,v,T,N,m,Z,I,C,y;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.orderInfo,t=n.nftInfo,s=n.setHash,c=n.renderPending,u="",e.prev=2,e.next=5,d.Z.beforeTrade({chain:null===t||void 0===t?void 0:t.chain});case 5:return e.next=7,d.Z.getTradeEvent({orderInfo:r,nftInfo:t,eventName:h.xy.P2P_BUY});case 7:return l=e.sent,x=+new Date,e.next=11,l(n);case 11:return E=e.sent,p=E.txnHash,v=E.checkType,T=E.gas,N=E.extJson,m=void 0===N?{}:N,null===c||void 0===c||c(),s(u=p),Z=+new Date,d.Z.reportOtherTx({txnHash:p,orderInfo:r}),(0,i.KT)({orderInfo:r,nftInfo:t,scene:f.SCENE_ENUM.P2PBuy,txnHash:u}),e.next=25,o.Z.getWalletAccount();case 25:return I=e.sent,C=+new Date,(0,i.PN)("sendTransaction",{txnHash:p,createHashTime:x,endHashTime:Z,startCheckTransactionTime:C,scene:f.SCENE_ENUM.P2PBuy,from:null===r||void 0===r?void 0:r.makerAddress,to:I}),e.next=30,d.Z.checkTransaction({orderInfo:r,nftInfo:t,txnHash:p,checkType:v,gas:T,scene:f.SCENE_ENUM.P2PBuy,from:null===r||void 0===r?void 0:r.makerAddress,to:I,extJson:m,bizType:h.lW.P2P});case 30:return y=e.sent,e.abrupt("return",Promise.resolve(y));case 34:return e.prev=34,e.t0=e.catch(2),d.Z.sendErrorMsg({loggerKey:h.I4,scene:f.SCENE_ENUM.P2PBuy,error:e.t0,orderInfo:r,nftInfo:t,txnHash:u}),e.abrupt("return",Promise.reject(e.t0));case 38:case"end":return e.stop()}}),e,null,[[2,34]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.P2P_CANCEL]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x,E,p,v;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.nftInfo,t=n.orderInfo,s=n.setHash,c=n.renderPending,e.prev=1,e.next=4,d.Z.beforeTrade({chain:null===r||void 0===r?void 0:r.chain});case 4:return e.next=6,d.Z.getTradeEvent({nftInfo:r,orderInfo:t,eventName:h.xy.P2P_CANCEL});case 6:return u=e.sent,e.next=9,u(n);case 9:return l=e.sent,x=l.txnHash,E=l.checkType,s(x),null===c||void 0===c||c(),(0,i.KT)({nftInfo:r,orderInfo:t,scene:f.SCENE_ENUM.P2PCancelSell,txnHash:x}),e.next=17,o.Z.getWalletAccount();case 17:return p=e.sent,e.next=20,d.Z.checkTransaction({nftInfo:r,orderInfo:t,txnHash:x,checkType:E,scene:f.SCENE_ENUM.P2PCancelSell,from:p,to:p,bizType:h.lW.P2P});case 20:return v=e.sent,e.abrupt("return",Promise.resolve(v));case 24:return e.prev=24,e.t0=e.catch(1),d.Z.sendErrorMsg({loggerKey:h.I4,scene:f.SCENE_ENUM.P2PCancelSell,error:e.t0,payload:{chain:null===r||void 0===r?void 0:r.chain,sourceName:null===t||void 0===t?void 0:t.sourceName,tokenStandard:null===r||void 0===r?void 0:r.tokenStandard},nftInfo:r,orderInfo:t}),e.abrupt("return",Promise.reject(e.t0));case 28:case"end":return e.stop()}}),e,null,[[1,24]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.INIT_ACCOUNT]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c,u,l,x;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.chain,e.next=3,o.Z.getWalletAccount();case 3:return t=e.sent,e.prev=4,e.next=7,d.Z.getTradeEvent({nftInfo:{chain:r},eventName:h.xy.INIT_ACCOUNT});case 7:return s=e.sent,e.next=10,s(n);case 10:return c=e.sent,u=c.txnHash,l=c.checkType,(0,i.KT)({scene:f.SCENE_ENUM.InitAccount,txnHash:u,from:t}),e.next=16,d.Z.checkTransaction({nftInfo:{chain:r},txnHash:u,checkType:l,scene:f.SCENE_ENUM.InitAccount,from:t,to:t});case 16:return x=e.sent,e.abrupt("return",Promise.resolve(x));case 20:return e.prev=20,e.t0=e.catch(4),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.InitAccount,error:e.t0,from:t}),e.abrupt("return",Promise.reject(e.t0));case 24:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.CREATE_COLLECTION]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.getWalletAccount();case 2:return r=e.sent,e.prev=3,e.next=6,l.default[h.xy.CREATE_COLLECTION](n);case 6:return t=e.sent,s=t.txnHash,c=t.checkType,(0,i.KT)({scene:f.SCENE_ENUM.CreateCollection,txnHash:s,from:r}),e.abrupt("return",Promise.resolve({txnHash:s,checkType:c}));case 13:return e.prev=13,e.t0=e.catch(3),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.CreateCollection,error:e.t0,from:r}),e.abrupt("return",Promise.reject(e.t0));case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(n){return e.apply(this,arguments)}}(),[h.xy.BATCH_MINT]:function(){var e=(0,c.Z)((0,a.Z)().mark((function e(n){var r,t,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.getWalletAccount();case 2:return r=e.sent,e.prev=3,e.next=6,l.default[h.xy.BATCH_MINT](n);case 6:return t=e.sent,s=t.txnHash,c=t.checkType,(0,i.KT)({scene:f.SCENE_ENUM.BatchMint,txnHash:s,from:r}),e.next=12,(0,f.subscribeTxResult)({txnHash:s,scene:f.SCENE_ENUM.BatchMint,payload:n.payload});case 12:return e.abrupt("return",Promise.resolve({txnHash:s,checkType:c}));case 15:return e.prev=15,e.t0=e.catch(3),d.Z.sendErrorMsg({scene:f.SCENE_ENUM.BatchMint,error:e.t0,from:r}),e.abrupt("return",Promise.reject(e.t0));case 19:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(n){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/defi-mode/1401/index.842d0d19.js.map