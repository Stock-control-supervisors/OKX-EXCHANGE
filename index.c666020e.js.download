"use strict";(self.webpackChunkdefi_mode=self.webpackChunkdefi_mode||[]).push([[6916],{36916:(e,t,r)=>{r.d(t,{Z:()=>m});var n=r(1413),a=r(74165),s=r(15861),o=r(14300),c=r(35686),u=(r(92643),r(1708)),i=r(64037),f=r(23781),p=r(48635),d=r(45271),l=r(48779),v=r(40910),x=r(72208);const Z={["".concat(l.Wo).concat(v.jR.PUNK)]:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(254).then(r.bind(r,60254));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),["".concat(l.Hx).concat(x.Qz.MAGICEDEN)]:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(4659).then(r.bind(r,54659));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),["".concat(l.Hx).concat(x.Qz.TENSOR)]:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(7040).then(r.bind(r,57040));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[i.Bv.SOLANA]:(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([r.e(5120),r.e(1215),r.e(4659),r.e(6896)]).then(r.bind(r,24973));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)}))),[i.Bv.IMX]:(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(7634).then(r.bind(r,47634));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)}))),[i.Bv.APTOS]:(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2782).then(r.bind(r,72782));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)}))),[i.Bv.BTC]:(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(4180).then(r.bind(r,74180));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)}))),[i.Bv.SUI]:(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(7105).then(r.bind(r,57105));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)}))),[l.b2]:(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.bind(r,74579));case 2:return t=e.sent,e.abrupt("return",(0,n.Z)({},t.default));case 4:case"end":return e.stop()}}),e)})))};var h={getTradeEvent:e=>(0,s.Z)((0,a.Z)().mark((function t(){var r,n,s,o,c,u,i,f,p,d,v,x,h,m,I;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.orderInfo,n=void 0===r?{}:r,s=e.nftInfo,o=e.eventName,c=n.source,u=s.chain,i=s.tokenStandard,!(f=Z["".concat(l.Wo).concat(i)])){t.next=10;break}return t.next=7,f();case 7:if(!(p=t.sent)[o]){t.next=10;break}return t.abrupt("return",p[o]);case 10:if(!(d=Z["".concat(l.Hx).concat(c)])){t.next=17;break}return t.next=14,d();case 14:if(!(v=t.sent)[o]){t.next=17;break}return t.abrupt("return",v[o]);case 17:if(!(x=Z[u])){t.next=24;break}return t.next=21,x();case 21:if(!(h=t.sent)[o]){t.next=24;break}return t.abrupt("return",h[o]);case 24:return m=Z[l.b2],t.next=27,m();case 27:return I=t.sent,t.abrupt("return",I[o]);case 29:case"end":return t.stop()}}),t)})))(),checkTransaction:e=>(0,s.Z)((0,a.Z)().mark((function t(){var r,s,o,f,d,v,x,Z,h,m,I,A,T,y,b,k,w,E,g,_,S,N,C,L,U,P,O;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.Z.getWalletAccount();case 2:if(r=t.sent,s=e.nftInfo,o=void 0===s?{}:s,f=e.orderInfo,d=void 0===f?{}:f,v=e.txnHash,x=e.checkType,Z=e.scene,h=e.from,m=e.to,I=e.extJson,A=void 0===I?{}:I,T=e.extPayload,y=void 0===T?{}:T,b=e.extSubscribeParams,k=void 0===b?{}:b,w=e.extResult,E=void 0===w?{}:w,g=e.notShowToast,_=e.message,S=e.bizType,N=o.chain,C=o.contractAddress,L=o.tokenId,U=o.tokenStandard,P=(0,n.Z)({txnHash:v,walletAddress:r,chain:N,scene:Z,extJson:A,bizType:S,payload:(0,n.Z)({chain:N,contractAddress:C,tokenId:L,from:h,to:m,orderId:d.id,source:d.source,sourceName:d.sourceName,tokenStandard:U},y)},k),x!==l.U3.DIRECT){t.next=11;break}P=(0,n.Z)((0,n.Z)({},P),{},{status:p.SCENE_STATUS_ENUM.SUCCESS,urlPre:i.c6[N].browser}),g||(_?c.Z.success({title:_,showClose:!0,duration:5}):p.NFTOperateSubcribe.emit(Z,P)),t.next=17;break;case 11:if(x!==l.U3.PUSH){t.next=17;break}return t.next=14,(0,p.subscribeTxResult)(P);case 14:if(P=t.sent,(null===(O=P)||void 0===O?void 0:O.status)!=p.SCENE_STATUS_ENUM.FAIL){t.next=17;break}throw(0,n.Z)((0,n.Z)({},P),{},{toastType:l.pD.NOT_SHOW});case 17:return t.abrupt("return",(0,n.Z)((0,n.Z)({},P),E));case 18:case"end":return t.stop()}}),t)})))(),checkBatchTransaction:e=>(0,s.Z)((0,a.Z)().mark((function t(){var r,s,o,c,d,v,x,Z,h,m,I,A,T,y,b,k;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.Z.getWalletAccount();case 2:return r=t.sent,s=e.txnHash,o=e.chain,c=e.scene,d=e.from,v=e.to,x=e.extJson,Z=void 0===x?{}:x,h=e.extPayload,m=void 0===h?{}:h,I=e.extSubscribeParams,A=void 0===I?{}:I,T=e.extResult,y=void 0===T?{}:T,t.next=6,(0,p.subscribeTxResult)((0,n.Z)({txnHash:s,walletAddress:r,extJson:Z,chain:o,scene:c,payload:(0,n.Z)({from:d,to:v},m)},A));case 6:if((b=t.sent).batchTransferInfo||!i.Ay.includes(Number(o))||c!=p.SCENE_ENUM.BatchTransfer){t.next=12;break}return t.next=10,f.Z.getBatchTransferResult({txHash:s,chain:o});case 10:k=t.sent,b.batchTransferInfo=k.data;case 12:if((null===b||void 0===b?void 0:b.status)!=p.SCENE_STATUS_ENUM.FAIL){t.next=14;break}throw(0,n.Z)((0,n.Z)({},b),{},{toastType:l.pD.NOT_SHOW});case 14:return t.abrupt("return",(0,n.Z)((0,n.Z)({},b),y));case 15:case"end":return t.stop()}}),t)})))(),formatError(e){var t,r,n,a=e.error,s=l.pD.NORMAL;try{if(a instanceof Error)try{var o=JSON.parse(null===a||void 0===a?void 0:a.message);r=(null===o||void 0===o?void 0:o.customMessage)||(null===o||void 0===o?void 0:o.msg)||(null===o||void 0===o?void 0:o.message)||(null===o||void 0===o?void 0:o.error_message),t=Number(null===o||void 0===o?void 0:o.code),s=(null===o||void 0===o?void 0:o.toastType)||l.pD.NORMAL,n=null===o||void 0===o?void 0:o.key}catch(c){r=null===a||void 0===a?void 0:a.message}else"string"===typeof a?r=a:"object"===typeof a&&(r=(null===a||void 0===a?void 0:a.customMessage)||(null===a||void 0===a?void 0:a.msg)||(null===a||void 0===a?void 0:a.message)||(null===a||void 0===a?void 0:a.error_message),t=Number(null===a||void 0===a?void 0:a.code),s=(null===a||void 0===a?void 0:a.toastType)||l.pD.NORMAL,n=null===a||void 0===a?void 0:a.key)}catch(u){}return{key:n,code:t,message:r,toastType:s}},sendErrorMsg:e=>(0,s.Z)((0,a.Z)().mark((function t(){var r,s,u,i,f,v,x,Z,m,I,A,T,y;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.scene,s=e.error,u=void 0===s?{}:s,i=e.payload,f=void 0===i?{}:i,v=e.notShowToast,x=void 0!==v&&v,Z=e.loggerKey,m=h.formatError({error:u}),I=m.message,A=m.code,T=m.toastType,y=m.key,(0,d.no)((0,n.Z)((0,n.Z)({},e),{},{key:y||Z})),!x){t.next=6;break}return t.abrupt("return");case 6:if(T!==l.pD.NOT_SHOW){t.next=8;break}return t.abrupt("return");case 8:if(![l.Bq.REJECT_TRADE].includes(A)){t.next=11;break}return c.Z.error({title:(0,o.O4)("nftmarket_bulk_list_error_toast_cancelled")}),t.abrupt("return");case 11:if(!I||T===l.pD.FALLBACK){t.next=14;break}return c.Z.error({title:I}),t.abrupt("return");case 14:(0,p.catchTxError)({scene:r,error:u,payload:f});case 15:case"end":return t.stop()}}),t)})))(),reportOtherTx(e){var t=e.txnHash;t&&f.Z.reportOtherTxId({txHash:t})},beforeTrade:e=>(0,s.Z)((0,a.Z)().mark((function t(){var r,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.chain,Number(r)!==i.Bv.IMX){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,u.Z.getChainId();case 5:if(n=t.sent,!r&&0!==r||Number(n)===Number(r)){t.next=8;break}throw new Error((0,o.O4)("nftmarket_buy_error_toast_wrong_network",{network:i.c6[r].name}));case 8:case"end":return t.stop()}}),t)})))()};const m=h},74579:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(74165),a=r(15861),s=r(14300),o=r(1708),c=r(64037),u=r(45862),i=r(40910),f=r(72208),p=r(48635),d=r(64397),l=r(48779),v=r(48903),x=r(29439),Z=r(1413),h=r(79042),m=r(83030),I=r(85658);function A(e){return h.OK.toHex(e)}var T={signTypedData:e=>(0,a.Z)((0,n.Z)().mark((function t(){var r,a,s,u,i,f;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.stepActionInfo,e.chain!=c.Bv.STARKNET){t.next=3;break}return t.abrupt("return",T.signMessage({stepActionInfo:r}));case 3:return a=r.data,s=r.types,u=r.domain,i=r.primaryType,t.next=6,o.Z.signTypedData({message:{domain:u,message:a,primaryType:i,types:s}});case 6:return f=t.sent,t.abrupt("return",f);case 8:case"end":return t.stop()}}),t)})))(),signMessage:e=>(0,a.Z)((0,n.Z)().mark((function t(){var r,a,s,c,u,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.stepActionInfo,a=r.data,s=r.types,c=r.domain,u=r.primaryType,t.next=4,o.Z.signMessage({message:(0,m.Z)({domain:c,message:a,primaryType:u,types:s})});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})))(),signLazyLoad:e=>(0,a.Z)((0,n.Z)().mark((function t(){var r,a,o,c,u,i,f,p,d,v,x,h,m,A,T,y;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.stepActionInfo,a=e.params,o=void 0===a?{}:a,c=r.post,u=c.body,i=c.endpoint,f=c.method,t.next=4,I.Z[f](i,(0,Z.Z)((0,Z.Z)({},u),o));case 4:if(p=t.sent,d=p.data,v=d.errors,x=void 0===v?[]:v,h=d.item,A=(m=void 0===h?{}:h).orderIds,0!==(T=void 0===A?[]:A).length){t.next=13;break}throw{code:l.XX.LISTING,errors:x,message:x.length>1?(0,s.O4)("nftmarket_bulk_list_error_toast_all_failed"):null===(y=x[0])||void 0===y?void 0:y.message};case 13:return t.abrupt("return",{successOrderIds:T,errors:x,item:m});case 14:case"end":return t.stop()}}),t)})))(),sellLazyLoad:e=>(0,a.Z)((0,n.Z)().mark((function t(){var r,a,o,u,i,f,p,d,v,h,m,T,y,b,k,w,E,g;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.stepActionInfo,a=e.signature,o=e.chain,u=r.post,i=u.body,f=u.endpoint,p=u.method,d={},o==c.Bv.STARKNET&&(v=(0,x.Z)(a,2),h=v[0],m=v[1],d={r:A(h),s:A(m)}),t.next=6,I.Z[p](f,(0,Z.Z)((0,Z.Z)({},i),{},{signature:a},d),{timeout:6e4});case 6:if(T=t.sent,y=T.data,b=y.successOrderIds,k=void 0===b?[]:b,w=y.errors,E=void 0===w?[]:w,0!==k.length){t.next=14;break}throw{code:l.XX.LISTING,errors:E,message:E.length>1?(0,s.O4)("nftmarket_bulk_list_error_toast_all_failed"):null===(g=E[0])||void 0===g?void 0:g.message};case 14:return t.abrupt("return",{successOrderIds:k,errors:E});case 15:case"end":return t.stop()}}),t)})))(),requestLazyLoad:e=>(0,a.Z)((0,n.Z)().mark((function t(){var r,a,s,o,c,u,i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.stepActionInfo,a=e.params,s=void 0===a?{}:a,o=r.post,c=o.body,u=o.endpoint,i=o.method,t.abrupt("return",I.Z[i](u,(0,Z.Z)((0,Z.Z)({},c),s)));case 3:case"end":return t.stop()}}),t)})))(),getPayload(e){var t=e.stepActionInfo,r=void 0===t?{}:t,n={[i.Is.STARKNET_TRANSACTION]:()=>r.payload,[i.Is.STARKNET_MULTI_TRANSACYION]:()=>{var e=r.transactionItemList;return(void 0===e?[]:e).map((e=>{var t=e.payload;return void 0===t?{}:t}))}}[r.kind];return n&&n()}};const y=T;var b={[l.xy.SELL]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,c,u,d,v,x,Z,h,m,I,A,T,b,k,w,E,g;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.stepActionInfo,c=t.nftInfo,u=o.kind,d=o,v=[],x=[],u!==i.Is.LAZY_LOADING){e.next=15;break}return e.next=8,y.signLazyLoad({stepActionInfo:o});case 8:Z=e.sent,h=Z.successOrderIds,m=Z.errors,I=Z.item,v.push(...m),x.push(...h),d=I;case 15:return e.next=17,y.signTypedData({stepActionInfo:d,chain:null===c||void 0===c?void 0:c.chain});case 17:return A=e.sent,e.next=20,y.sellLazyLoad({stepActionInfo:d,signature:A,chain:null===c||void 0===c?void 0:c.chain});case 20:if(T=e.sent,b=T.successOrderIds,k=T.errors,v.push(...k),x.push(...b),(null===(r=d)||void 0===r||null===(a=r.platform)||void 0===a?void 0:a.source)!==f.Qz.BLUR){e.next=28;break}return e.next=28,(0,p.subscribeBlurOrderResult)({scene:i.Pv.BlurListingRes,count:1,txHash:d.orderIds[0],interval:0});case 28:return E=v.length,g=b.length,E+g>1&&(w=E>0?(0,s.O4)("nftmarket_bulk_list_error_toast_partly_success",{num1:g,num2:E}):(0,s.O4)("nftmarket_bulk_list_error_toast_all_sucess")),e.abrupt("return",{checkType:l.U3.DIRECT,errors:v,successOrderIds:x,message:w});case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.UPDATE_PRICE]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,e.abrupt("return",b[l.xy.SELL]({stepActionInfo:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.MAKE_OFFER]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=t.nftInfo,e.next=4,y.signTypedData({stepActionInfo:r,chain:null===a||void 0===a?void 0:a.chain});case 4:return s=e.sent,e.next=7,y.sellLazyLoad({stepActionInfo:r,signature:s,chain:null===a||void 0===a?void 0:a.chain});case 7:return e.abrupt("return",{checkType:l.U3.DIRECT});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.INIT_ACCOUNT]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,i,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 3:return a=e.sent,s=a.value,c=a.input,u=a.contractAddress,e.next=7,o.Z.getWalletAccount();case 7:return i=e.sent,f={from:i,to:u,data:c,value:s},e.next=11,v.Z.preExecuteTrade({payload:f,chain:null===r||void 0===r?void 0:r.chain,scene:p.SCENE_ENUM.InitAccount,from:i});case 11:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(f,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.BUY]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,i,f,x,Z;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=t.orderInfo,s=t.nftInfo,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 3:return c=e.sent,u=c.value,i=c.input,f=c.contractAddress,e.next=7,o.Z.getWalletAccount();case 7:return x=e.sent,Z=y.getPayload({stepActionInfo:c})||{from:x,to:f,data:i,value:u},e.next=11,v.Z.preExecuteTrade({payload:Z,scene:p.SCENE_ENUM.Purchase,orderNftInfoList:[{orderInfo:a,nftInfo:s}],from:x});case 11:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(Z,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.BATCH_BUY]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,i,f,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=t.orderList,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 3:return s=e.sent,c=s.value,u=s.input,i=s.contractAddress,e.next=7,o.Z.getWalletAccount();case 7:return f=e.sent,l=y.getPayload({stepActionInfo:s})||{from:f,to:i,data:u,value:c},e.next=11,v.Z.preExecuteTrade({payload:l,orderNftInfoList:a,scene:p.SCENE_ENUM.BatchPurchase,from:f});case 11:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(l,(t=>{e({txnHash:t})})).catch(t)})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.ACCEPT_OFFER]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,c,u,i,x,Z,h,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.orderInfo,a=t.nftInfo,c=t.stepActionInfo,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:c});case 3:if(u=e.sent,!(r.source===f.Qz.BLUR&&u.totalPrice<c.totalPrice)){e.next=6;break}throw new Error((0,s.O4)("nftmarket_blurbid_reminder_invalid_offer"));case 6:return i=u.input,x=u.contractAddress,e.next=9,o.Z.getWalletAccount();case 9:return Z=e.sent,h=y.getPayload({stepActionInfo:u}),m=h||{from:Z,to:x,data:i},e.next=14,v.Z.preExecuteTrade({payload:m,orderNftInfoList:[{orderInfo:r,nftInfo:a}],scene:p.SCENE_ENUM.AcceptOffer,from:Z});case 14:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(m,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.BATCH_ACCEPT_OFFER]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,i,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=t.orderList,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 3:return s=e.sent,c=s.input,u=s.contractAddress,e.next=7,o.Z.getWalletAccount();case 7:return i=e.sent,f={from:i,to:u,data:c},e.next=11,v.Z.preExecuteTrade({payload:f,orderNftInfoList:a,scene:p.SCENE_ENUM.AcceptOffer,from:i});case 11:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(f,(t=>{e({txnHash:t})})).catch(t)})));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.TRANSFER]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,f,x,Z,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.nftInfo,a=t.tradeData,s=t.stepActionInfo,e.next=3,o.Z.getWeb3();case 3:return c=e.sent,e.next=6,o.Z.getWalletAccount();case 6:return f=e.sent,x=()=>{var e=r.tokenId,t=r.contractAddress,n=r.tokenStandard,s=a.target,o=a.amount,p=n===i.jR.ERC1155,d=p?u.qV:u.U5,l=new c.eth.Contract(d,t),v=[f,s,e];return p&&v.push(o,[]),{from:f,to:t,data:l.methods.safeTransferFrom(...v).encodeABI()}},Z=y.getPayload({stepActionInfo:s}),h=Z||x(),e.next=12,v.Z.preExecuteTrade({payload:h,orderNftInfoList:[{nftInfo:r}],scene:p.SCENE_ENUM.Transfer,from:f});case 12:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(h,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.BATCH_TRANSFER]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,f,l,x,Z,h,m,I,A;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.nftList,a=t.transferData,s=t.stepActionInfo,f=a.target,l=a.chain,x=r.map((e=>{var t=e.tokenStandard===i.jR.ERC1155;return{itemType:t?i.L6.ERC1155:i.L6.ERC721,token:e.contractAddress,id:e.tokenId,amount:t&&e.readyTransferValue||1}})),e.next=5,o.Z.getWeb3();case 5:return Z=e.sent,e.next=8,o.Z.getWalletAccount();case 8:return h=e.sent,m=()=>{var e=c.c6[l].key,t=u.IM[e].batchTransfer,r=t.abi,n=t.addr,a=new Z.eth.Contract(r,n),s=[f,x,!1];return{from:h,to:n,data:a.methods.transferItems(...s).encodeABI()}},I=y.getPayload({stepActionInfo:s}),A=I||m(),e.next=14,v.Z.preExecuteTrade({payload:A,orderNftInfoList:r.map((e=>({nftInfo:e}))),scene:p.SCENE_ENUM.BatchTransfer,from:h});case 14:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(A,(t=>{e({txnHash:t})})).catch(t)})));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.CANCEL]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,f,x,Z,h,m,I;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=t.orderInfo,s=t.nftInfo,c=r.kind,e.next=4,o.Z.getWalletAccount();case 4:if(u=e.sent,c!==i.Is.SIGNATURE){e.next=12;break}return e.next=8,y.signTypedData({stepActionInfo:r,chain:null===s||void 0===s?void 0:s.chain});case 8:return f=e.sent,e.next=11,y.requestLazyLoad({stepActionInfo:r,params:{signature:f}});case 11:return e.abrupt("return",{checkType:l.U3.DIRECT});case 12:return e.next=14,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 14:return x=e.sent,Z=x.input,h=x.contractAddress,m={from:u,to:h,data:Z},I=y.getPayload({stepActionInfo:x})||m,e.next=20,v.Z.preExecuteTrade({payload:I,orderNftInfoList:[{orderInfo:a,nftInfo:s}],scene:p.SCENE_ENUM.CancelSell,from:u});case 20:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(I,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.CANCEL_OFFER]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,i,f,x,Z;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=t.orderInfo,s=t.nftInfo,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 3:return c=e.sent,e.next=6,o.Z.getWalletAccount();case 6:return u=e.sent,i=c.input,f=c.contractAddress,x=y.getPayload({stepActionInfo:c}),Z=x||{from:u,to:f,data:i},e.next=12,v.Z.preExecuteTrade({payload:Z,orderNftInfoList:[{orderInfo:a,nftInfo:s}],scene:p.SCENE_ENUM.CancellOffer,from:u});case 12:return e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(Z,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.BATCH_MINT]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.input,a=t.contractAddress,e.next=3,o.Z.getWalletAccount();case 3:return s=e.sent,c={from:s,to:a,data:r},e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(c,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.CREATE_COLLECTION]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.contractAddress,a=t.callData,e.next=3,o.Z.getWalletAccount();case 3:return s=e.sent,c={from:s,to:r,data:a},e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(c,(t=>{e({txnHash:t,checkType:l.U3.PUSH})})).catch(t)})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.P2P_SELL]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,o,c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=r,e.next=4,y.signTypedData({stepActionInfo:a});case 4:return s=e.sent,e.next=7,y.sellLazyLoad({stepActionInfo:a,signature:s});case 7:return o=e.sent,c=o.successOrderIds,u=o.errors,e.abrupt("return",{checkType:l.U3.DIRECT,errors:u,successOrderIds:c});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.P2P_BUY]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,i,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,e.next=3,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 3:return a=e.sent,s=a.value,c=a.input,u=a.contractAddress,e.next=7,o.Z.getWalletAccount();case 7:return i=e.sent,f={from:i,to:u,data:c,value:s},e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(f,(t=>{e({txnHash:t,checkType:l.U3.PUSH})}),{txSource:10}).catch(t)})));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l.xy.P2P_CANCEL]:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s,c,u,f,p,x,Z;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stepActionInfo,a=r.kind,s=r.message,e.next=4,o.Z.getWalletAccount();case 4:if(c=e.sent,a!==i.Is.SIGNATURE){e.next=12;break}return e.next=8,o.Z.signData({account:c,signData:s});case 8:return u=e.sent,e.next=11,y.requestLazyLoad({stepActionInfo:r,params:{signature:u}});case 11:return e.abrupt("return",{checkType:l.U3.DIRECT});case 12:return e.next=14,v.Z.getTradeStepActionInfo({stepActionInfo:r});case 14:return f=e.sent,p=f.input,x=f.contractAddress,Z={from:c,to:x,data:p},e.abrupt("return",new Promise(((e,t)=>{(0,d.T7)(Z,(t=>{e({txnHash:t,checkType:l.U3.PUSH})}),{txSource:10}).catch(t)})));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};const k=b}}]);
//# sourceMappingURL=https://static-daily.okg.com/crash/okfe/defi-mode/6916/index.c666020e.js.map